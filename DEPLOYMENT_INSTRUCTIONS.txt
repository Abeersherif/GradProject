===============================================================================
MEDTWIN COMPLETE DEPLOYMENT GUIDE
===============================================================================

Deploy Your React Frontend + Flask Backend + All Agents + 3D Visualization

===============================================================================
WHAT YOU'RE DEPLOYING
===============================================================================

âœ“ React Frontend (medtwin-react) with 3D visualization
âœ“ Flask Backend (gp-backend) with AI agents
âœ“ Digital Twin functionality  
âœ“ All Agent Systems (Medical, Prediction, Medication, Notifier, Coordinator)
âœ“ 3D Models (heart, kidneys, pancreas, vascular system)
âœ“ Google Calendar Integration

===============================================================================
DEPLOYMENT PLATFORMS
===============================================================================

RECOMMENDED: Vercel (Frontend) + Render (Backend)
- Free tiers available
- Easy to set up
- Auto-deploy from GitHub
- Great performance

ALTERNATIVE: Both on Render
- Simpler (one platform)
- Still has free tier

===============================================================================
STEP 1: PREPARE YOUR PROJECT FILES
===============================================================================

Backend files are ready:
âœ“ gp-backend/requirements.txt - Updated with all dependencies
âœ“ gp-backend/.env.example - Template for environment variables

Frontend files to create:
- Create .env.production in medtwin-react directory
- Content: VITE_API_URL=https://your-backend-url.onrender.com

===============================================================================
STEP 2: PUSH TO GITHUB
===============================================================================

1. Create new repository on GitHub (github.com)
   - Click "New repository"
   - Name it "medtwin" or similar
   - Make it public or private
   - DON'T initialize with README

2. In PowerShell, run:

   cd c:\Users\Administrator\Desktop\Agents
   git init
   git add .
   git commit -m "Prepare MedTwin for deployment"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   git push -u origin main

   (Replace YOUR_USERNAME and YOUR_REPO_NAME with your actual values)

===============================================================================
STEP 3: DEPLOY BACKEND TO RENDER
===============================================================================

1. Go to https://render.com
2. Sign up with GitHub
3. Click "New +" button â†’ "Web Service"
4. Click "Connect account" to link GitHub
5. Find and select your medtwin repository
6. Click "Connect"

7. Configure the service:
   
   Name: medtwin-backend
   Region: (Choose closest to your users)
   Branch: main
   Root Directory: gp-backend
   Runtime: Python 3
   Build Command: pip install -r requirements.txt
   Start Command: gunicorn app:app --bind 0.0.0.0:$PORT
   Instance Type: Free (or Starter for production)

8. Click "Advanced" and add Environment Variables:

   DEEPSEEK_API_KEY = [your actual DeepSeek API key]
   FLASK_ENV = production
   PYTHON_VERSION = 3.11.0
   FRONTEND_URL = [will update this later]

9. Click "Create Web Service"
10. WAIT 5-10 minutes for deployment
11. COPY YOUR BACKEND URL (looks like: https://medtwin-backend-xxxx.onrender.com)

12. Test it works:
    - Visit https://medtwin-backend-xxxx.onrender.com/health
    - Should see: {"status": "healthy"}

===============================================================================
STEP 4: DEPLOY FRONTEND TO VERCEL
===============================================================================

OPTION A - Using Vercel Dashboard (EASIER):

1. Go to https://vercel.com
2. Sign up with GitHub
3. Click "Add New..." â†’ "Project"
4. Import your GitHub repository
5. Configure:

   Project Name: medtwin-react
   Framework Preset: Vite
   Root Directory: medtwin-react
   Build Command: npm run build  
   Output Directory: dist

6. Add Environment Variable:

   Name: VITE_API_URL
   Value: [Your backend URL from Step 3]
   Example: https://medtwin-backend-xxxx.onrender.com

7. Click "Deploy"
8. Wait 3-5 minutes
9. COPY YOUR FRONTEND URL (looks like: https://medtwin-react.vercel.app)


OPTION B - Using Vercel CLI:

1. Install Vercel CLI:
   npm install -g vercel

2. Navigate to frontend:
   cd c:\Users\Administrator\Desktop\Agents\medtwin-react

3. Login to Vercel:
   vercel login

4. Deploy:
   vercel --prod

5. Follow prompts and set VITE_API_URL environment variable

===============================================================================
STEP 5: CONNECT FRONTEND AND BACKEND
===============================================================================

1. Go to Render Dashboard
2. Click on your medtwin-backend service
3. Go to "Environment" tab
4. Find FRONTEND_URL variable (or add it)
5. Set value to: [Your frontend URL from Step 4]
   Example: https://medtwin-react.vercel.app
6. Save changes
7. Backend will automatically redeploy (wait 2-3 minutes)

===============================================================================
STEP 6: TEST YOUR DEPLOYMENT
===============================================================================

1. Visit your frontend URL
2. Open browser DevTools (Press F12)
3. Test these features:

   â–¡ Homepage loads
   â–¡ Login/Registration works
   â–¡ Dashboard displays correctly
   â–¡ Navigate to Digital Twin page
   â–¡ 3D models load and display
   â–¡ All organs are visible (heart, kidneys, pancreas, vasculature)
   â–¡ Timeline slider works
   â–¡ Upload medical report â†’ Agent analysis appears
   â–¡ Prediction agent works
   â–¡ Medication recommendations appear

4. Check Network tab in DevTools:
   - API calls should show 200 status codes
   - If you see CORS errors, check FRONTEND_URL is set correctly

===============================================================================
STEP 7 (OPTIONAL): GOOGLE CALENDAR INTEGRATION
===============================================================================

1. Go to Google Cloud Console: https://console.cloud.google.com
2. Navigate to: APIs & Services â†’ Credentials
3. Click on your OAuth 2.0 Client ID
4. Under "Authorized redirect URIs", add:
   
   https://medtwin-backend-xxxx.onrender.com/oauth2callback
   https://medtwin-backend-xxxx.onrender.com/google/callback

   (Replace xxxx with your actual Render service ID)

5. Save changes

6. In Render backend service:
   - Go to Environment tab
   - Scroll to "Secret Files" section
   - Click "Add Secret File"
   - Filename: credentials.json
   - Content: [Paste your entire credentials.json file content]
   - Save

===============================================================================
TROUBLESHOOTING
===============================================================================

PROBLEM: Frontend shows "Cannot connect to server"
SOLUTION:
- Check VITE_API_URL is set in Vercel
- Verify backend is running (visit /health endpoint)
- Check browser console for CORS errors
- Verify FRONTEND_URL is set in Render backend

PROBLEM: Backend crashes or shows error
SOLUTION:
- Go to Render â†’ Your Service â†’ Logs
- Look for Python errors
- Common issues:
  * Missing dependencies â†’ Add to requirements.txt
  * Missing environment variables â†’ Add in Render dashboard
  * Import errors â†’ Check all your agent files are in gp-backend

PROBLEM: 3D models don't load
SOLUTION:
- Check browser console for errors
- Verify models are in medtwin-react/public/models/
- Check file paths use /models/filename.glb (not ./models/)
- Ensure model files are committed to Git

PROBLEM: CORS errors in browser
SOLUTION:
- Update FRONTEND_URL in Render backend
- Check app.py CORS configuration
- Redeploy backend
- Clear browser cache

===============================================================================
COSTS
===============================================================================

FREE TIER (Good for testing/portfolios):
- Frontend (Vercel): $0
- Backend (Render): $0 (sleeps after 15 min inactivity)
- Total: $0/month

PRODUCTION (No sleep, always available):
- Frontend (Vercel): $0 or $20/month
- Backend (Render Starter): $7/month
- Total: $7-27/month

RECOMMENDED PRODUCTION:
- Frontend (Vercel Pro): $20/month
- Backend (Render Standard): $25/month
- Total: $45/month

===============================================================================
WHAT'S NEXT?
===============================================================================

After successful deployment:

â–¡ Set up custom domain (optional)
â–¡ Add monitoring and alerts
â–¡ Configure analytics
â–¡ Set up automated backups
â–¡ Add more environment-specific configs
â–¡ Create staging environment
â–¡ Document your API endpoints

===============================================================================
QUICK REFERENCE LINKS
===============================================================================

Render Dashboard: https://dashboard.render.com
Vercel Dashboard: https://vercel.com/dashboard
GitHub: https://github.com
Google Cloud Console: https://console.cloud.google.com

Render Docs: https://render.com/docs
Vercel Docs: https://vercel.com/docs

===============================================================================
YOUR DEPLOYMENT URLS
===============================================================================

After deployment, record your URLs here:

Backend URL: ________________________________________________

Frontend URL: ________________________________________________

GitHub Repo: ________________________________________________

===============================================================================

ðŸŽ‰ Congratulations! Your MedTwin application is now live!

===============================================================================
